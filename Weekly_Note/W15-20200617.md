```sh
[root@vm1 user]# vim opt.sh
[root@vm1 user]# chmod +x opt.sh
[root@vm1 user]# ./opt.sh
the platform is ok
+------------------------------------+
| your system is CentOS 7 X86_64     |
| start optimizing......             |
+------------------------------------+
```

```sh
#!/bin/bash

platform=`uname -i`
if [ $platform != "x86_64" ];then
  echo "this script is only for 64bit Operating System !"
  exit 1
fi

echo "the platform is ok"
cat << EOF
+------------------------------------+
| your system is CentOS 7 X86_64     |
| start optimizing......             |
+------------------------------------+
EOF

#class1 download package on network
#add dns server
#cat >> /etc/resolv.conf << EOF
#nameserver 8.8.8.8
#nameserver 9.9.9.9
#EOF

#mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum/repos.d/CentOS-Base.repo.bak
#wget -O /etc/yum.repos.d/CentOS-Base.repo http://127.0.0.1/CentOS-Base.repo
#wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
#yum clean all
#yum makecache

#class2 changedate&time
#yum -y install ntp
#timedatectl set-timezone Asia/Taipei
#/usr/sbin/ntpdate  tock.stdtime.gov.tw

#echo "* 4 * * * /usr/sbin/ntpdate tock.stdtime.gov.tw > /dev/null 2>&1" >> /var/spool/cron/root
#systemctl restart crond.service

#class3 large ulimit
#設置最大打開文件描述符號
echo "ulimit -SHn 102400" >> /etc/rc.local
cat >> /etc/security/limits.conf << EOF
* soft nofile 655350
* hard nofile 655350
EOF

#禁用selinuc
sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config

setenforce 0

systemctl disable firewalld
systemctl stop firewalld

sed -i 's/#PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config
systemctl restart sshd

```


```sh
[root@vm1 user]# ./opt.sh
the platform is ok
+------------------------------------+
| your system is CentOS 7 X86_64     |
| start optimizing......             |
+------------------------------------+
setenforce: SELinux is disabled

```



```sh
[root@vm1 user]# cat /etc/redhat-release | awk -F " " '{print $4}'
7.7.1908
[root@vm1 user]# cat /etc/redhat-release | awk -F " " '{print $4}' | awk -F "." '{print $1}'
7
```

---
參考：
- []()
- []()
- []()
