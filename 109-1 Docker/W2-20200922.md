* [Docker]()
    - [Docker 介紹]()
    - [Docker 使用]()
    - [容器與虛擬機器]()
        - [容器]()
        - [虛擬機]()
    - [Docker 特色]()
        - [LXC]()
        - [aufs(advanced multi-layer ) 架構]()
    - [鏡像(Image) 與 容器(Container)]()
---
# Docker
## Docker 介紹
* 利用 LXC 與 aufs 等技術實作出的容器管理軟體
* 可以記錄一個或多個系統的變動
* 以規格封裝成為一層一層的架構
* 新的變動疊在舊的上面，只有最上層才能寫入，下層只能讀不能寫
## Docker 使用
* 到 [Dockerhub](https://hub.docker.com/) 申請一組帳號和密碼，如果將來在電腦裡有做好的 Image(映像檔/鏡像檔)，可以把映像檔/鏡像檔上傳自自己的 Dockerhub 上，公開給大家使用或者隱藏。
## 容器與虛擬機器
### 容器
* 主要靠 LXC 與 aufs 等 Linux 技術達成
* 容器主要利用**隔離**的技術
* 效能好，安全性差

命名空間|用途
-|-
MNT (Mount)|管理檔案系統的掛載點 (mount point)。
PID (Process)|隔離執行程序。
NET (Network)|管理網路介面。
IPC (Inter-process communication)|管理執行程序之間的通訊資源。
UTS (Host name)|隔離系統核心版本與識別碼。
CGROUPS|限制、隔離、累計各執行程序的資源用量。
User ID (User)|提供權限隔離與使用者身分區隔。

### 虛擬機
* 虛擬機安裝完成後就像一台一班的主機一樣，擁有虛擬但完整的硬體
* 相較於容器效能較差，但安全性高

## Docker 特色
### LXC
### aufs(advanced multi-layer ) 架構
## 鏡像(Image) 與 容器(Container)
* 完整的鏡像：`[來源位置]/[帳號]/[鏡像名字]:[tags]`
> 若是官方的套件會省略 `[來源位置]/[帳號]`，`[tags]` 若是 `latest` 也會省略

`docker start -h`
```sh
docker rm -f `docker ps -a -q`
            $(docker ps -a -q)

docker tag
docker login docker push
```

## 補充
* 遇到無法安裝 Centos7 Docker
* search：centos7 aliyun yum，參考 [CentOS 7- 配置阿里镜像源](https://developer.aliyun.com/article/704987)
1. 安裝 wget
```sh
yum install -y wget
```
2. 下載 Centos7 的 repo 文件
```sh
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
```
3. 更新鏡像源
```sh
# 清除緩存
yum clean all
# 生成緩存
yum makecache
```
---
參考資料：
- [Install Docker Engine on CentOS](https://docs.docker.com/engine/install/centos/)
- [DockerHub-httpd](https://hub.docker.com/_/httpd)
- [Install Docker Compose](https://docs.docker.com/compose/install/)
- [CentOS 7- 配置阿里镜像源](https://developer.aliyun.com/article/704987)